<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>CommercetoolsGrant | @gradientedge/commercetools-utils</title><meta name="description" content="Documentation for @gradientedge/commercetools-utils"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@gradientedge/commercetools-utils</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@gradientedge/commercetools-utils</a></li><li><a href="CommercetoolsGrant.html">CommercetoolsGrant</a></li></ul><h1>Class CommercetoolsGrant</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Holds the details of the grant returned from commercetools in response
to an authorisation API related request:
<a href="https://docs.commercetools.com/api/authorization">https://docs.commercetools.com/api/authorization</a></p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">CommercetoolsGrant</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="CommercetoolsGrant.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#accessToken" class="tsd-kind-icon">access<wbr/>Token</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#anonymousId" class="tsd-kind-icon">anonymous<wbr/>Id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#customerId" class="tsd-kind-icon">customer<wbr/>Id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresAt" class="tsd-kind-icon">expires<wbr/>At</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresIn" class="tsd-kind-icon">expires<wbr/>In</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#refreshToken" class="tsd-kind-icon">refresh<wbr/>Token</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#scopes" class="tsd-kind-icon">scopes</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresWithin" class="tsd-kind-icon">expires<wbr/>Within</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="CommercetoolsGrant.html#extractKeyFromScope" class="tsd-kind-icon">extract<wbr/>Key<wbr/>From<wbr/>Scope</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Commercetools<wbr/>Grant<span class="tsd-signature-symbol">(</span>data<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">CommercetoolsGrantResponse</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="CommercetoolsGrant.html" class="tsd-signature-type" data-tsd-kind="Class">CommercetoolsGrant</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L61">src/lib/auth/CommercetoolsGrant.ts:61</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create a new grant from grant data received back from commercetools.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>data: <span class="tsd-signature-type">CommercetoolsGrantResponse</span></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="CommercetoolsGrant.html" class="tsd-signature-type" data-tsd-kind="Class">CommercetoolsGrant</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="accessToken" class="tsd-anchor"></a><h3>access<wbr/>Token</h3><div class="tsd-signature tsd-kind-icon">access<wbr/>Token<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = &#39;&#39;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L15">src/lib/auth/CommercetoolsGrant.ts:15</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The access token string needed when making requests to commercetools. If this
was generated by a customer logging in, then this is used by commercetools
to identify the customer.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="anonymousId" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> anonymous<wbr/>Id</h3><div class="tsd-signature tsd-kind-icon">anonymous<wbr/>Id<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L49">src/lib/auth/CommercetoolsGrant.ts:49</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>When this grant came from a call to {@see CommercetoolsAuth.getAnonymousGrant}
or {@see CommercetoolsApi.getAnonymousGrant} then the value will be populated
with the id of the anonymous customer to which this grant relates.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="customerId" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> customer<wbr/>Id</h3><div class="tsd-signature tsd-kind-icon">customer<wbr/>Id<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L56">src/lib/auth/CommercetoolsGrant.ts:56</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>When this grant is generated from a call to {@see CommercetoolsAuth.login}
or {@see CommercetoolsApi.login} then this value will be populated with the
id of the customer to which this grant relates.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="expiresAt" class="tsd-anchor"></a><h3>expires<wbr/>At</h3><div class="tsd-signature tsd-kind-icon">expires<wbr/>At<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Date</span><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L35">src/lib/auth/CommercetoolsGrant.ts:35</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>This is the expiry date/time of the access token. This is calculated based
on the <code>expiredIn</code> property, and as such may be very slightly after the
internal commercetools expiry date (due to the time involved to receive
and process the response.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="expiresIn" class="tsd-anchor"></a><h3>expires<wbr/>In</h3><div class="tsd-signature tsd-kind-icon">expires<wbr/>In<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 0</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L27">src/lib/auth/CommercetoolsGrant.ts:27</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The duration of the access token in seconds (typically 48 hours)</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="refreshToken" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> refresh<wbr/>Token</h3><div class="tsd-signature tsd-kind-icon">refresh<wbr/>Token<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L22">src/lib/auth/CommercetoolsGrant.ts:22</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The refresh token is required for refreshing an existing grant. A refresh token
is only issued for customer grants (either logged in or anonymous), an not for
client grants.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="scopes" class="tsd-anchor"></a><h3>scopes</h3><div class="tsd-signature tsd-kind-icon">scopes<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> = []</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L42">src/lib/auth/CommercetoolsGrant.ts:42</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>List of permission scopes. This will also include the <code>anonymous_id</code> when
generating an anonymous customer token, or the <code>customer_id</code> when logging
in as an existing customer.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="expiresWithin" class="tsd-anchor"></a><h3>expires<wbr/>Within</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">expires<wbr/>Within<span class="tsd-signature-symbol">(</span>refreshIfWithinSecs<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L83">src/lib/auth/CommercetoolsGrant.ts:83</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Calculates whether the grant is due to expire within a given number of
seconds. This is useful when deciding if the expiry date/time is close
enough to warrant pro-active renewal, rather than waiting for expiry.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>refreshIfWithinSecs: <span class="tsd-signature-type">number</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="extractKeyFromScope" class="tsd-anchor"></a><h3>extract<wbr/>Key<wbr/>From<wbr/>Scope</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">extract<wbr/>Key<wbr/>From<wbr/>Scope<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, scope<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gradientedge/commercetools-utils/blob/ec4d6fc/src/lib/auth/CommercetoolsGrant.ts#L93">src/lib/auth/CommercetoolsGrant.ts:93</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Given a scope string (as returned from commercetools), this method
extracts the value of the associated with the given key. Used for
retrieving the anonymous id and customer id from the scope string.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <span class="tsd-signature-type">string</span></h5></li><li><h5>scope: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class"><a href="CommercetoolsGrant.html" class="tsd-kind-icon">Commercetools<wbr/>Grant</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="CommercetoolsGrant.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#accessToken" class="tsd-kind-icon">access<wbr/>Token</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#anonymousId" class="tsd-kind-icon">anonymous<wbr/>Id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#customerId" class="tsd-kind-icon">customer<wbr/>Id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresAt" class="tsd-kind-icon">expires<wbr/>At</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresIn" class="tsd-kind-icon">expires<wbr/>In</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#refreshToken" class="tsd-kind-icon">refresh<wbr/>Token</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="CommercetoolsGrant.html#scopes" class="tsd-kind-icon">scopes</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="CommercetoolsGrant.html#expiresWithin" class="tsd-kind-icon">expires<wbr/>Within</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="CommercetoolsGrant.html#extractKeyFromScope" class="tsd-kind-icon">extract<wbr/>Key<wbr/>From<wbr/>Scope</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>